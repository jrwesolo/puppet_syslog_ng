
<%- if @comment -%>
<%= @comment.gsub(/^/, '# ').rstrip %>
<%- end -%>
log {
<%- if @source -%>
  <%- [*@source].compact.each do |s| -%>
    source(<%= s %>);
  <%- end -%>
<%- end -%>
<%- if @parser -%>
  <%- [*@parser].compact.each do |p| -%>
    parser(<%= p %>);
  <%- end -%>
<%- end -%>
<%- if @parser_spec -%>
  <%- [*@parser_spec].compact.each_index do |index| -%>
    parser(p_<%= @title %><%= index.zero? ? nil : "_#{index + 1}" %>);
  <%- end -%>
<%- end -%>
<%- if @rewrite -%>
  <%- [*@rewrite].compact.each do |r| -%>
    rewrite(<%= r %>);
  <%- end -%>
<%- end -%>
<%- if @rewrite_spec -%>
  <%- [*@rewrite_spec].compact.each_index do |index| -%>
    rewrite(r_<%= @title %><%= index.zero? ? nil : "_#{index + 1}" %>);
  <%- end -%>
<%- end -%>
<%- if @filter -%>
  <%- [*@filter].compact.each do |f| -%>
    filter(<%= f %>);
  <%- end -%>
<%- end -%>
<%- if @filter_spec -%>
  <%- [*@filter_spec].compact.each_index do |index| -%>
    filter(f_<%= @title %><%= index.zero? ? nil : "_#{index + 1}" %>);
  <%- end -%>
<%- end -%>
<%- if @destination -%>
  <%- [*@destination].compact.each do |d| -%>
    destination(<%= d %>);
  <%- end -%>
<%- end -%>
<%- if @file -%>
    destination(d_file_<%= @title %>);
<%- end -%>
<%- if @network -%>
    destination(d_net_<%= @title %>);
<%- end -%>
<%- if @syslog -%>
    destination(d_syslog_<%= @title %>);
<%- end -%>
<%- if @pipe -%>
    destination(d_pipe_<%= @title %>);
<%- end -%>
<%- if @flags -%>
    flags(<%= @flags %>);
<%- end -%>
};
